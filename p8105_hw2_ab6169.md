p8105_hw2_ab6169
================
Amrutha Banda
2025-09-25

## Problem 1

First, I load my libraries

Cleaning the `pols-month.csv` data

``` r
pols_df= 
  read_csv("data_hw2/pols-month.csv", na = c("NA", ".", "")) |>
separate(mon, into = c("year", "month", "day"), sep = "-") |>
mutate(
  year = as.integer(year),
  month = as.integer(month),
  month = month.name[month],
  president = ifelse(prez_gop == 1, "gop", "dem")) |>

  select(-day, -prez_gop, -prez_dem)
```

Cleaning the `snp.csv` data

``` r
snp_df= 
  read_csv("data_hw2/snp.csv", na = c("NA", ".", ""))|>
  separate(date, into = c("month", "day", "year"), sep = "/") |>
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    month = month.name[month]) |>
  select(year, month, close) |>
  arrange(year, month)
```

Cleaning the `unemployment.csv` data

``` r
unemployment_df= 
  read_csv("data_hw2/unemployment.csv", na = c("NA", ".", "")) |>
pivot_longer(
    cols = Jan:Dec,      
    names_to = "month",
    values_to = "unemployment"
  ) |>
  mutate(
    month = case_match(
      month,
      "Jan" ~ "January",
      "Feb" ~ "February",
      "Mar" ~ "March",
      "Apr" ~ "April",
      "May" ~ "May",
      "Jun" ~ "June",
      "Jul" ~ "July",
      "Aug" ~ "August",
      "Sep" ~ "September",
      "Oct" ~ "October",
      "Nov" ~ "November",
      "Dec" ~ "December") ) |> 
  rename(year = Year) |>
  select(year, month, unemployment)
```

Merging `snp.csv` and `pol-month.csv` and `unemployment.csv`

``` r
merged_df= 
pols_df |>
  left_join(snp_df, by = c("year", "month")) |>
  left_join(unemployment_df, by = c("year", "month"))
```

Write-Up:

## Problem 2

``` r
mr_trash_df =
  read_excel("data_hw2/trashwheeldata.xlsx", 
             sheet= "Mr. Trash Wheel",
             skip = 1, na= c("NA", ".", "")) |> 
janitor:: clean_names() |> 
drop_na(dumpster) |> 
select(-x15, -x16) |>
 mutate(
  year = as.integer(year),
  sports_balls = as.integer(round(sports_balls)),
  wheel= "Mr.Trash Wheel"
)
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
prof_trash_df =
  read_excel("data_hw2/trashwheeldata.xlsx",
             sheet = "Professor Trash Wheel",
             na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  drop_na(dumpster) |> 
  mutate(
    year = as.integer(year),
    wheel = "Professor Trash Wheel") 


gwynnda_df =
  read_excel("data_hw2/trashwheeldata.xlsx",
             sheet = "Gwynnda Trash Wheel",na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  drop_na(dumpster) |> 
  drop_na(wrappers) |> 
  mutate(
    year = as.integer(year),
    wheel = "Gwynnda Trash Wheel") 

trash_wheel_df =
  bind_rows(mr_trash_df, prof_trash_df, gwynnda_df) |>
  janitor:: clean_names() |>
  relocate(wheel, year, month)
```

Write-up

## Problem 3

``` r
zipcodes_df= 
  read_csv("data_hw2/zipcodes.csv", na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  mutate(
    zip = as.character(zip_code)) |>
  select(zip, county, neighborhood)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zori_df = 
  read_csv("data_hw2/zipnyc.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  mutate(zip = as.character(region_name)) |> 
select(zip, starts_with("x20")) |>       
  pivot_longer(
    cols = -zip,
    names_to = "date",
    values_to = "zori"
  ) |> 
mutate(date = sub("^x", "", date)) |>  
separate(date, into = c("year", "month", "day"), sep = "_") |>
  mutate(
    year  = as.integer(year),
    month = as.integer(month),
    day   = as.integer(day)
  )
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
mergezip_df=
  left_join(zori_df, zipcodes_df, by = "zip") |>
  select(zip, county, neighborhood, year, month, zori) |>
  arrange(county, neighborhood, zip, year, month)
```

    ## Warning in left_join(zori_df, zipcodes_df, by = "zip"): Detected an unexpected many-to-many relationship between `x` and `y`.
    ## ℹ Row 4757 of `x` matches multiple rows in `y`.
    ## ℹ Row 256 of `y` matches multiple rows in `x`.
    ## ℹ If a many-to-many relationship is expected, set `relationship =
    ##   "many-to-many"` to silence this warning.

Writeup: I cleaned and merged the Zillow Observed Rent Index (zori)
dataset with the ZIP code information. From this, I got a single tidy
dataset, `mergezip_df`. The final dataset has 17516 total observations.
Many rows of the ZORI dataset contain missing values because Zillow did
not report rent for those ZIP codes or months
